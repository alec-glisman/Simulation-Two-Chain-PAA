# Allow restarting (continuing) previous simulation
RESTART

# Select groups with MDAnalysis syntax
g_ion: GROUP NDX_FILE=index.ndx NDX_GROUP={ion}
g_poly: GROUP NDX_FILE=index.ndx NDX_GROUP=Chain_Oxygen
c1: GROUP NDX_FILE=index.ndx NDX_GROUP=Chain_A

# Calculate total coordination number
c_ion_poly: COORDINATION ...
GROUPA=g_ion GROUPB=g_poly R_0=0.35 NN=8 MM=16
NLIST NL_CUTOFF=0.5 NL_STRIDE=100
...

# treat each molecule as whole
# rebuild molecules that are split by the periodic boundary conditions,
# avoid discontinuities changes in the CV value and artifacts in the calculations
WHOLEMOLECULES ENTITY0=c1

# calculate chain radius of gyration
rg: GYRATION TYPE=RADIUS ATOMS=c1 MASS_WEIGHTED

# Print both collective variables on COLVAR file every 100 steps
PRINT ARG=c_ion_poly,rg FILE={plumed_output_filename} STRIDE=100
